{% extends "base.html" %}
{% load static %}  <!-- Memastikan baris ini ada di paling atas untuk mengakses file statis -->

{% block content %}
<div class="container mx-auto text-center py-16">
    <!-- Jika keranjang tidak kosong, tampilkan daftar item -->
    {% if item_keranjang %}
    <div class="container mx-auto py-16">
    <div class="flex flex-col lg:flex-row lg:justify-between gap-8">

        <!-- Cart Items (Left Section) -->
        <div class="lg:w-2/3">
            <h2 class="font-bold text-5xl mb-6">Your Bag</h2>

            <!-- Success Message when Item Added -->
            {% if item_added %}
                <div class="bg-green-100 text-green-700 p-4 mb-6 rounded shadow-md">
                    <p class="text-sm font-semibold">Item successfully added to your cart!</p>
                </div>
            {% endif %}

            <!-- List of Cart Items -->
            <ul class="space-y-6">
                {% for item in item_keranjang %}
                <li class="flex items-start justify-between p-4 bg-white border rounded-lg shadow-sm hover:shadow-md transition-shadow">
                    <div class="flex items-start space-x-6">
                        <!-- Product Image -->
                        <img src="{{ item.sneaker.image.url }}" alt="{{ item.sneaker.name }}" class="w-24 h-24 object-cover rounded-lg">
                        <div>
                            <h3 class="font-semibold text-lg">{{ item.sneaker.name }}</h3>
                            <p class="text-sm text-gray-500">{{ item.sneaker.color }}</p>
                            <p class="text-sm">Size: {{ item.size }}</p>
                            <p class="text-sm font-bold mt-2">Rp {{ item.sneaker.price }} x {{ item.kuantitas }}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="font-bold text-lg">Total: $ {{ item.total_harga }}</p>
                        <a href="{% url 'keranjang:remove_from_cart' item.sneaker.id %}" class="text-red-600 underline mt-2 inline-block">Remove</a>
                    </div>
                </li>
                {% endfor %}
            </ul>

            <!-- Total Items and Price -->
            <p class="mt-8 text-xl font-bold">TOTAL: ({{ item_keranjang|length }} items) <span class="text-green-700">Rp {{ total_harga }}</span></p>
        </div>

        <!-- Order Summary and Checkout (Right Section) -->
        <div class="lg:w-1/3">
            <div class="border p-6 rounded-lg bg-gray-100 shadow-md">
                <h3 class="font-semibold text-lg mb-4">Order Summary</h3>

                <div class="flex justify-between mb-3">
                    <p class="text-gray-700">{{ item_keranjang|length }} Items</p>
                    <p class="text-gray-700">$ {{ total_harga }}</p>
                </div>
                <div class="flex justify-between mb-3">
                    <p class="text-gray-700">Original Price</p>
                    <p class="text-gray-700">$ {{ total_harga_asli }}</p>
                </div>
                <div class="flex justify-between mb-3">
                    <p class="text-gray-700">Delivery</p>
                    <p class="text-gray-700">FREE</p>
                </div>
                <div class="flex justify-between font-bold text-lg mt-4">
                    <p>Total</p>
                    <p class="text-green-700">$ {{ total_harga }}</p>
                </div>

                <!-- Checkout Button -->
                <a href="{% url 'keranjang:checkout_page' %}" class="block w-full bg-black text-white text-center py-4 px-6 mt-8 rounded-lg font-bold hover:bg-blue-700 transition-all">
                    Checkout
                </a>

                <!-- Accepted Payment Methods -->
                <div class="mt-8 text-sm">
                    <p class="text-gray-500 mb-2">Accepted Payment Methods:</p>
                    <div class="flex space-x-4 justify-center">
                        <img src="{% static 'img/bca.png' %}" alt="BCA" class="w-12">
                        <img src="{% static 'img/bni.png' %}" alt="BNI" class="w-12">
                        <img src="{% static 'img/mandiri.png' %}" alt="Mandiri" class="w-12">
                        <img src="{% static 'img/bri.png' %}" alt="BRI" class="w-12">
                        <img src="{% static 'img/cimb.png' %}" alt="CIMB" class="w-12">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

    <!-- Jika keranjang kosong, tampilkan pesan dan tombol -->
    {% else %}
    <div class="container mx-auto text-center py-16">
        <h2 class="text-4xl font-bold mb-4"> YOUR BAG IS EMPTY </h2>
         <div class="flex space-x-4 justify-center">
            <img src="{% static 'img/empty.png' %}" class="w-40 " >
        </div>

        <!-- Tombol untuk mulai berbelanja -->
        {% comment %} <#url nya nanti ke home_page> {% endcomment %}
        <a href="{% url 'keranjang:view_keranjang' %}" class="inline-block bg-black text-white py-3 px-6 rounded-lg font-bold transition-all duration-300 ease-in-out transform hover:scale-105">
            GET STARTED â†’
        </a>

        <!-- Metode pembayaran yang diterima -->
        <div class="mt-12">
            <p class="text-gray-700 font-semibold uppercase tracking-wide mb-4">Accepted Payment Methods:</p>
            <div class="flex justify-center space-x-6">
                <!-- Gambar metode pembayaran -->
                    <img src="{% static 'img/bca.png' %}" alt="BCA" class="w-14">
                    <img src="{% static 'img/bni.png' %}" alt="BNI" class="w-14">
                    <img src="{% static 'img/mandiri.png' %}" alt="Mandiri" class="w-14">
                    <img src="{% static 'img/bri.png' %}" alt="BRI" class="w-14">
                    <img src="{% static 'img/cimb.png' %}" alt="CIMB" class="w-14">
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock content %}
