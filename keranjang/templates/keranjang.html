{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mx-auto text-center py-16">
    <!-- Jika keranjang tidak kosong, tampilkan daftar item -->
    {% comment %} {% if item_keranjang %}  {% endcomment %}
    <div class="container mx-auto py-16">
    <div class="flex flex-col lg:flex-row lg:justify-between gap-8">

        <!-- Cart Items (Left Section) -->
        <div class="lg:w-2/3">
            <h2 class="font-bold text-5xl mb-6">Your Bag</h2>

            <!-- Success Message when Item Added -->
            {% if item_added %}
                <div class="bg-green-100 text-green-700 p-4 mb-6 rounded shadow-md">
                    <p class="text-sm font-semibold">Item successfully added to your cart!</p>
                </div>
            {% endif %}

            <!-- List of Cart Items -->
            <ul class="space-y-6">
                {% for item in item_keranjang %}
                <li class="flex items-start justify-between p-4 bg-white border rounded-lg shadow-sm hover:shadow-md transition-shadow">
                    <div class="flex items-start space-x-6">
                        <!-- Product Image -->
                        <img src="{{ item.sneaker.image.url }}" alt="{{ item.sneaker.name }}" class="w-24 h-24 object-cover rounded-lg">
                        <div>
                            <h3 class="font-semibold text-lg">{{ item.sneaker.name }}</h3>
                            <p class="text-sm text-gray-500">{{ item.sneaker.color }}</p>
                            <p class="text-sm">Size: {{ item.size }}</p>
                            <p class="text-sm font-bold mt-2">Rp {{ item.sneaker.price }} x {{ item.kuantitas }}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="font-bold text-lg">Total: Rp {{ item.total_harga }}</p>
                        <a href="{% url 'keranjang:remove_from_cart' item.sneaker.id %}" class="text-red-600 underline mt-2 inline-block">Remove</a>
                    </div>
                </li>
                {% endfor %}
            </ul>

            <!-- Total Items and Price -->
            <p class="mt-8 text-xl font-bold">TOTAL: ({{ item_keranjang|length }} items) <span class="text-green-700">Rp {{ total_harga }}</span></p>
        </div>

        <!-- Order Summary and Checkout (Right Section) -->
        <div class="lg:w-1/3">
            <div class="border p-6 rounded-lg bg-gray-100 shadow-md">
                <h3 class="font-semibold text-lg mb-4">Order Summary</h3>

                <div class="flex justify-between mb-3">
                    <p class="text-gray-700">{{ item_keranjang|length }} Items</p>
                    <p class="text-gray-700">Rp {{ total_harga }}</p>
                </div>
                <div class="flex justify-between mb-3">
                    <p class="text-gray-700">Original Price</p>
                    <p class="text-gray-700">Rp {{ total_harga_asli }}</p>
                </div>
                <div class="flex justify-between mb-3">
                    <p class="text-gray-700">Delivery</p>
                    <p class="text-gray-700">FREE</p>
                </div>
                <div class="flex justify-between font-bold text-lg mt-4">
                    <p>Total</p>
                    <p class="text-green-700">Rp {{ total_harga }}</p>
                </div>

                <!-- Payment Method Selection -->
                <form action="{% url 'keranjang:checkout_page' %}" method="POST">
                    {% csrf_token %}
             <div class="mb-4">
            <label for="payment_method" class="block text-sm font-medium text-gray-700">Payment Method</label>
            <select id="payment_method" name="payment_method" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                <option value="BCA">BCA</option>
                <option value="BNI">BNI</option>
                <option value="Mandiri">Mandiri</option>
                <option value="BRI">BRI</option>
                <option value="CIMB">CIMB</option>
            </select>
            <div class="flex space-x-4 justify-center">
                        <img src="{% static 'img/bca.png' %}" alt="BCA" class="w-12">
                        <img src="{% static 'img/bni.png' %}" alt="BNI" class="w-12">
                        <img src="{% static 'img/mandiri.png' %}" alt="Mandiri" class="w-12">
                        <img src="{% static 'img/bri.png' %}" alt="BRI" class="w-12">
                        <img src="{% static 'img/cimb.png' %}" alt="CIMB" class="w-12">
                    </div>
        </div>

        <!-- Tombol Checkout -->
        <a href="{% url 'keranjang:checkout_page' %}" class="block w-full bg-black text-white text-center py-4 px-6 mt-8 rounded-lg font-bold hover:bg-gray-700 transition-all">
            Checkout
        </a>
    </div>
</div>
    </div>
</div>

    <!-- Jika keranjang kosong, tampilkan pesan -->
    {% comment %} {% else %}
    <div class="container mx-auto text-center py-16">
        <h2 class="text-4xl font-bold mb-4"> YOUR BAG IS EMPTY </h2>
        <div class="flex space-x-4 justify-center">
            <img src="{% static 'img/empty.png' %}" class="w-40">
        </div>

        <!-- Button to start shopping -->
        <a href="{% url 'homepage:show_homepage' %}" class="inline-block bg-black text-white py-3 px-6 rounded-lg font-bold transition-all duration-300 ease-in-out transform hover:scale-105">
            GET STARTED â†’
        </a>
    </div>
    {% endif %}  {% endcomment %}
</div>
{% endblock %}
